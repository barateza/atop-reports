# CentOS 7 (atop 2.7.1 via EPEL) - x86_64 only for Plesk compatibility
# ELS Support: Until January 1, 2027 (Plesk Extended Lifecycle Support)
# Note: Uses QEMU for cross-platform compatibility (works on macOS and Linux)

vmType: "qemu"
arch: "x86_64"

images:
  - location: "https://cloud.centos.org/centos/7/images/CentOS-7-x86_64-GenericCloud.qcow2"
    arch: "x86_64"

# Increased resources for QEMU emulation compatibility
cpus: 4
memory: "4GiB"
disk: "12GiB"

mounts:
  - location: "~"
    writable: false
  - location: "/tmp/lima"
    writable: true

ssh:
  localPort: 0
  loadDotSSHPubKeys: true

containerd:
  system: false
  user: false

# Display configuration (QEMU emulation compatible)
video:
  display: "none"

provision:
  - mode: system
    script: |
      #!/bin/bash
      set -eux -o pipefail
      # Update package cache (suppress progress)
      yum update -y -q || true
